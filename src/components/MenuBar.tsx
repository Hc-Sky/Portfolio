"use client";

/**
 * MenuBar — exact macOS-style menu bar inspired by inikaj.com.
 *
 * Left:  Apple-style logo + "Hugo Cohen--Cofflard's Portfolio" (bold) + Contact + Resume
 * Right: macOS status icons (Layers, Battery, Wifi, Search, Control Center, Siri) + live clock
 */

import { useState, useEffect } from "react";

interface MenuBarProps {
    onOpenWindow: (windowId: string) => void;
}

export default function MenuBar({ onOpenWindow }: MenuBarProps) {
    const [time, setTime] = useState("");

    /* ─── Live Clock ─── */
    useEffect(() => {
        const updateTime = () => {
            const now = new Date();
            const weekday = now.toLocaleDateString("en-US", { weekday: "long" });
            const month = now.toLocaleDateString("en-US", { month: "short" });
            const day = now.getDate();
            const hours = now.getHours();
            const minutes = now.getMinutes().toString().padStart(2, "0");
            const ampm = hours >= 12 ? "PM" : "AM";
            const h12 = hours % 12 || 12;
            setTime(`${weekday}, ${month} ${day}  ${h12}:${minutes} ${ampm}`);
        };
        updateTime();
        const interval = setInterval(updateTime, 10_000);
        return () => clearInterval(interval);
    }, []);

    return (
        <div
            className="fixed top-0 left-0 right-0 z-[999] flex items-center justify-between select-none"
            style={{
                height: 25,
                paddingLeft: 8,
                paddingRight: 12,
                fontFamily:
                    '"SF Pro Text", -apple-system, "system-ui", "Segoe UI", Roboto, Helvetica, Arial, sans-serif',
                fontSize: 13,
                fontWeight: 700,
                color: "rgba(255,255,255,0.92)",
                letterSpacing: "-0.01em",
            }}
            role="menubar"
        >
            {/* ─── Left: Logo + Name + Links ─── */}
            <div className="flex items-center" style={{ gap: 18 }}>
                {/* Apple-style Logo */}
                <AppleLogo />

                {/* Portfolio Name — bold, underlined like the reference */}
                <button
                    onClick={() => onOpenWindow("about")}
                    className="hover:opacity-70 transition-opacity"
                    style={{
                        fontWeight: 700,
                        textDecoration: "underline",
                        textUnderlineOffset: 2,
                        cursor: "pointer",
                        background: "none",
                        border: "none",
                        color: "inherit",
                        fontSize: "inherit",
                        fontFamily: "inherit",
                        padding: 0,
                    }}
                >
                    Hugo Cohen--Cofflard&apos;s Portfolio
                </button>

                {/* Contact */}
                <button
                    onClick={() => onOpenWindow("contact")}
                    className="hover:opacity-70 transition-opacity"
                    style={{
                        fontWeight: 400,
                        cursor: "pointer",
                        background: "none",
                        border: "none",
                        color: "inherit",
                        fontSize: "inherit",
                        fontFamily: "inherit",
                        padding: 0,
                    }}
                >
                    Contact
                </button>

                {/* Resume */}
                <button
                    onClick={() => onOpenWindow("resume")}
                    className="hover:opacity-70 transition-opacity"
                    style={{
                        fontWeight: 400,
                        cursor: "pointer",
                        background: "none",
                        border: "none",
                        color: "inherit",
                        fontSize: "inherit",
                        fontFamily: "inherit",
                        padding: 0,
                    }}
                >
                    Resume
                </button>
            </div>

            {/* ─── Right: Status Tray + Clock ─── */}
            <div className="flex items-center" style={{ gap: 10 }}>
                <LayersIcon />
                <BatteryIcon />
                <WifiIcon />
                <SearchIcon />
                <ControlCenterIcon />
                <SiriIcon />

                {/* Clock */}
                <span
                    style={{
                        fontSize: 13,
                        fontWeight: 700,
                        marginLeft: 6,
                        whiteSpace: "nowrap",
                    }}
                >
                    {time}
                </span>
            </div>
        </div>
    );
}

/* ═══════════════════════════════════════════════════════
   SVG Icons — exact macOS icons from inikaj.com reference
   ═══════════════════════════════════════════════════════ */

const W = "rgba(255,255,255,0.92)";
const W5 = "rgba(255,255,255,0.5)";
const W9 = "rgba(255,255,255,0.9)";

function AppleLogo() {
    return (
        <svg width="13" height="17" viewBox="0 0 13 17" fill={W}>
            <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M7.85042 3.86815C7.44466 4.08478 7.05953 4.1931 6.69504 4.1931C6.61939 4.1931 6.54717 4.18622 6.4784 4.17247C6.47152 4.15184 6.46465 4.11401 6.45777 4.05899C6.45089 4.00398 6.44745 3.94552 6.44745 3.88362C6.44745 3.47099 6.53686 3.07038 6.71567 2.68182C6.89448 2.29325 7.09736 1.97174 7.32431 1.71728C7.61315 1.37341 7.97765 1.08801 8.4178 0.861057C8.85794 0.634107 9.27746 0.513755 9.67634 0.5C9.69697 0.589405 9.70728 0.696003 9.70728 0.819794C9.70728 1.23243 9.6282 1.63303 9.47002 2.0216C9.31184 2.41017 9.10896 2.75575 8.86138 3.05835C8.59317 3.38158 8.25618 3.65152 7.85042 3.86815ZM5.0187 16.3349C4.77455 16.445 4.48743 16.5 4.15732 16.5C3.65528 16.5 3.21513 16.3006 2.83688 15.9017C2.45863 15.5028 2.07006 15.0248 1.67118 14.4678C1.2104 13.8075 0.816677 13.0012 0.490006 12.0487C0.163335 11.0962 0 10.1351 0 9.16538C0 8.12691 0.196003 7.25521 0.588008 6.55029C0.980013 5.84537 1.48377 5.31238 2.09929 4.95132C2.71481 4.59026 3.35268 4.40974 4.0129 4.40974C4.36364 4.40974 4.69375 4.46647 5.00322 4.57995C5.3127 4.69342 5.60327 4.80862 5.87492 4.92553C6.14657 5.04245 6.39244 5.1009 6.61251 5.1009C6.8257 5.1009 7.07329 5.03901 7.35525 4.91522C7.63722 4.79142 7.95358 4.66935 8.30432 4.549C8.65506 4.42865 9.02987 4.36847 9.42876 4.36847C9.58006 4.36847 9.83795 4.39254 10.2024 4.44068C10.5669 4.48882 10.9675 4.62465 11.4043 4.84816C11.841 5.07167 12.2381 5.44133 12.5957 5.95712C12.5751 5.97776 12.4754 6.05169 12.2966 6.17892C12.1178 6.30615 11.9183 6.49183 11.6983 6.73598C11.4782 6.98012 11.2856 7.2896 11.1206 7.66441C10.9555 8.03922 10.873 8.48453 10.873 9.00032C10.873 9.59177 10.9779 10.0938 11.1876 10.5064C11.3974 10.9191 11.6415 11.2509 11.9201 11.5019C12.1986 11.753 12.4462 11.9369 12.6628 12.0538C12.8794 12.1707 12.9946 12.2326 13.0084 12.2395C13.0015 12.267 12.9138 12.5112 12.7453 12.972C12.5768 13.4327 12.3 13.9451 11.9149 14.509C11.5779 14.9973 11.2151 15.4478 10.8266 15.8604C10.438 16.273 9.97206 16.4794 9.42876 16.4794C9.06426 16.4794 8.7651 16.4261 8.53127 16.3195C8.29744 16.2129 8.05674 16.1063 7.80916 15.9997C7.56157 15.8931 7.22802 15.8398 6.80851 15.8398C6.40275 15.8398 6.06404 15.8948 5.79239 16.0048C5.52074 16.1149 5.26284 16.2249 5.0187 16.3349Z"
            />
        </svg>
    );
}

function LayersIcon() {
    return (
        <svg width="17" height="17" viewBox="0 0 17 17" fill={W}>
            <g opacity="0.9">
                <path
                    fillRule="evenodd"
                    clipRule="evenodd"
                    d="M4.80396 4.32086L6.5443 3.19476C7.56507 2.53426 7.83386 2.38047 8.09013 2.32054C8.35974 2.25749 8.64026 2.25749 8.90987 2.32054C9.16614 2.38047 9.43493 2.53426 10.4557 3.19476L12.196 4.32086C12.907 4.78091 13.3706 5.08227 13.693 5.33523C14.0126 5.58601 14.0544 5.68634 14.0557 5.68945L14.0557 5.6895C14.1394 5.88806 14.1394 6.11194 14.0557 6.3105L14.0557 6.31055C14.0544 6.31366 14.0126 6.41399 13.693 6.66477C13.3706 6.91773 12.907 7.21909 12.196 7.67914L10.4557 8.80524C9.43493 9.46574 9.16614 9.61953 8.90987 9.67946C8.64026 9.74251 8.35974 9.74251 8.09013 9.67946C7.83386 9.61953 7.56507 9.46574 6.5443 8.80524L4.80396 7.67914C4.09298 7.21909 3.62942 6.91773 3.30699 6.66477C2.98736 6.41399 2.94557 6.31366 2.94427 6.31055L2.94425 6.3105C2.86063 6.11194 2.86063 5.88806 2.94425 5.6895L2.94427 5.68945C2.94557 5.68634 2.98736 5.58601 3.30699 5.33523C3.62942 5.08227 4.09298 4.78091 4.80396 4.32086ZM4.15206 8.68662C2.76905 7.79174 2.07755 7.3443 1.83832 6.77625C1.62928 6.27986 1.62928 5.72014 1.83832 5.22375C2.07755 4.6557 2.76905 4.20826 4.15206 3.31338L5.89239 2.18727C6.83649 1.57639 7.30854 1.27094 7.81688 1.15207C8.26623 1.04699 8.73377 1.04699 9.18312 1.15207C9.69146 1.27094 10.1635 1.57639 11.1076 2.18727L12.8479 3.31338C14.2309 4.20826 14.9224 4.6557 15.1617 5.22375C15.3707 5.72014 15.3707 6.27986 15.1617 6.77625C14.9224 7.3443 14.2309 7.79174 12.8479 8.68662L11.1076 9.81273C10.1635 10.4236 9.69145 10.7291 9.18312 10.8479C8.73377 10.953 8.26623 10.953 7.81688 10.8479C7.30854 10.7291 6.83649 10.4236 5.89239 9.81273L4.15206 8.68662Z"
                />
                <path
                    d="M4.50517 9.3591L2.82793 10.3306C2.50082 10.5201 2.38672 10.5965 2.31494 10.6766C2.12478 10.8887 2.06153 11.1859 2.14832 11.4584C2.17806 11.5518 2.24625 11.6518 2.58263 11.8519L6.67584 14.285C7.36756 14.6965 7.71342 14.9023 8.08285 14.9535C8.35922 14.9919 8.64028 14.9919 8.91664 14.9535C9.28608 14.9023 9.63193 14.6965 10.3237 14.285L14.4169 11.8519C14.7532 11.6518 14.9214 11.5518 14.9512 11.4584C15.038 11.1859 14.9747 10.8887 14.7846 10.6766C14.7128 10.5965 14.5987 10.5201 14.2716 10.3306L12.4943 9.3591"
                    stroke={W}
                    strokeWidth="1.3"
                    fill="none"
                />
                <path
                    d="M3.09648 8.13594L2.82793 8.29139C2.50082 8.48088 2.38672 8.55729 2.31494 8.63741C2.12478 8.84949 2.06153 9.14668 2.14832 9.41919C2.17806 9.51258 2.24625 9.61261 2.58263 9.81268L6.67584 12.2458C7.36756 12.6573 7.71342 12.8631 8.08285 12.9143C8.35922 12.9527 8.64028 12.9527 8.91664 12.9143C9.28608 12.8631 9.63193 12.6573 10.3237 12.2458L14.4169 9.81268C14.7532 9.61261 14.9214 9.51258 14.9512 9.41919C15.038 9.14668 14.9747 8.84949 14.7846 8.63741C14.7128 8.55729 14.5987 8.48088 14.2716 8.29139L13.903 8.13594"
                    stroke={W}
                    strokeWidth="1.3"
                    fill="none"
                />
            </g>
        </svg>
    );
}

function BatteryIcon() {
    return (
        <svg width="26" height="13" viewBox="0 0 26 13">
            <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M0 3.5C0 1.84315 1.34315 0.5 3 0.5H20C21.6569 0.5 23 1.84315 23 3.5V9.5C23 11.1569 21.6569 12.5 20 12.5H3C1.34315 12.5 0 11.1569 0 9.5V3.5ZM1 3.5C1 2.39543 1.89543 1.5 3 1.5H20C21.1046 1.5 22 2.39543 22 3.5V9.5C22 10.6046 21.1046 11.5 20 11.5H3C1.89543 11.5 1 10.6046 1 9.5V3.5ZM25.5 6.5C25.5 7.61042 24.8967 8.57994 24 9.09865V3.90135C24.8967 4.42006 25.5 5.38958 25.5 6.5Z"
                fill={W5}
            />
            <rect x="2" y="2.5" width="14" height="8" rx="1" fill={W9} />
        </svg>
    );
}

function WifiIcon() {
    return (
        <svg width="16" height="12" viewBox="0 0 16 12" fill={W}>
            <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M7.9998 0.5C11.1827 0.5 14.0183 1.98703 15.8497 4.30426L14.3704 5.6603C12.9091 3.73978 10.5992 2.5 7.9998 2.5C5.40036 2.5 3.09049 3.73978 1.62923 5.6603L0.149902 4.30426C1.98133 1.98703 4.81691 0.5 7.9998 0.5ZM12.8877 7.01944C11.7998 5.49438 10.0159 4.5 7.9998 4.5C5.9837 4.5 4.19984 5.49438 3.11192 7.01944L4.60317 8.38642C5.30949 7.25373 6.56662 6.5 7.9998 6.5C9.43298 6.5 10.6901 7.25373 11.3964 8.38642L12.8877 7.01944ZM9.86886 9.7867C9.58157 9.03436 8.85309 8.5 7.9998 8.5C7.14652 8.5 6.41804 9.03436 6.13075 9.7867L7.9998 11.5L9.86886 9.7867Z"
            />
        </svg>
    );
}

function SearchIcon() {
    return (
        <svg width="13" height="13" viewBox="0 0 13 13" fill={W}>
            <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M10.5 5.5C10.5 6.61014 10.1382 7.63578 9.5261 8.46544L12.0303 10.9697C12.3232 11.2626 12.3232 11.7374 12.0303 12.0303C11.7641 12.2966 11.3474 12.3208 11.0538 12.1029L10.9697 12.0303L8.46544 9.5261C7.63578 10.1382 6.61014 10.5 5.5 10.5C2.73858 10.5 0.5 8.26142 0.5 5.5C0.5 2.73858 2.73858 0.5 5.5 0.5C8.26142 0.5 10.5 2.73858 10.5 5.5ZM5.5 9.5C7.70914 9.5 9.5 7.70914 9.5 5.5C9.5 3.29086 7.70914 1.5 5.5 1.5C3.29086 1.5 1.5 3.29086 1.5 5.5C1.5 7.70914 3.29086 9.5 5.5 9.5Z"
            />
        </svg>
    );
}

function ControlCenterIcon() {
    return (
        <svg width="14" height="14" viewBox="0 0 14 14" fill={W}>
            <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M3 0.5C1.34315 0.5 0 1.84315 0 3.5C0 5.15685 1.34315 6.5 3 6.5H11C12.6569 6.5 14 5.15685 14 3.5C14 1.84315 12.6569 0.5 11 0.5H3ZM3 1.5C1.89543 1.5 1 2.39543 1 3.5C1 4.60457 1.89543 5.5 3 5.5H11C12.1046 5.5 13 4.60457 13 3.5C13 2.39543 12.1046 1.5 11 1.5H3ZM3 7.5C1.34315 7.5 0 8.84315 0 10.5C0 12.1569 1.34315 13.5 3 13.5H11C12.6569 13.5 14 12.1569 14 10.5C14 8.84315 12.6569 7.5 11 7.5H3ZM11 12.5C12.1046 12.5 13 11.6046 13 10.5C13 9.39543 12.1046 8.5 11 8.5C9.89543 8.5 9 9.39543 9 10.5C9 11.6046 9.89543 12.5 11 12.5ZM3 5C3.82843 5 4.5 4.32843 4.5 3.5C4.5 2.67157 3.82843 2 3 2C2.17157 2 1.5 2.67157 1.5 3.5C1.5 4.32843 2.17157 5 3 5Z"
            />
        </svg>
    );
}

function SiriIcon() {
    return (
        // eslint-disable-next-line @next/next/no-img-element
        <img
            src="https://framerusercontent.com/images/dPmBV7RVqajiEK5Z6fWoKM30s5c.png"
            alt="Siri"
            width={14}
            height={14}
            style={{ borderRadius: "50%" }}
        />
    );
}
